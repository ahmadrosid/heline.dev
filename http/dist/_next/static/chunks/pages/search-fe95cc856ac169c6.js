(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(4333)}])},4333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var r=n(5893),l=n(9008),a=n(1163),s=n(7294);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s.useRef)(!1),r=(0,s.useRef)(),l=(0,s.useRef)(e),a=(0,s.useCallback)((function(){return n.current}),[]),i=(0,s.useCallback)((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,l.current()}),t)}),[t]),c=(0,s.useCallback)((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return(0,s.useEffect)((function(){l.current=e}),[e]),(0,s.useEffect)((function(){return i(),c}),[t]),[a,c,i]}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(c){i=!0,l=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n(9669),d=n.n(u);function h(e){return s.Children.toArray(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);s=!0);}catch(c){i=!0,l=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw l}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){var e,t,n,c,u,f,m,x=(0,a.useRouter)(),v=x.query.q,g=void 0===v?"":v,y=(0,s.useState)(!1),j=y[0],b=y[1],w=(0,s.useState)(""),N=w[0],k=w[1],C=(0,s.useState)(null),_=C[0],S=C[1],A=(0,s.useState)({repo:[],lang:[],path:[]}),E=A[0],q=A[1],O=function(e,t){var n,r,l;if(""!=e){if(null==t){if(x.query["filter[repo]"]){var a=Object.assign(t||{},{repo:x.query["filter[repo]"].split(",")});t=a}if(x.query["filter[lang]"]){var s=Object.assign(t||{},{lang:x.query["filter[lang]"].split(",")});t=s}if(x.query["filter[path]"]){var i=Object.assign(t||{},{path:x.query["filter[path]"].split(",")});t=i}null!=t&&(console.log("Updating filter"),q((function(){return t})))}var c=e;(null===t||void 0===t||null===(n=t.repo)||void 0===n?void 0:n.length)>0&&(c+="&filter[repo]=".concat(t.repo.join(","))),(null===t||void 0===t||null===(r=t.lang)||void 0===r?void 0:r.length)>0&&(c+="&filter[lang]=".concat(t.lang.join(","))),(null===t||void 0===t||null===(l=t.path)||void 0===l?void 0:l.length)>0&&(c+="&filter[path]=".concat(t.path.join(","))),d().get("/api/search?q=".concat(c)).then((function(e){null===e.data.hits.hits?(b(!0),S(null)):(b(!1),S(e.data.hits))})).catch((function(e){console.error(e),b(!0),S(null)})),x.push("search?q=".concat(c),void 0,{shallow:!0})}},T=(p(function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=o(i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),3),r=n[0],l=n[1],a=n[2];return(0,s.useEffect)(a,t),[r,l]}((function(){""!=N&&O(N,E)}),500,[N]),2)[1],function(e,t){var n=_.facets[e].buckets[t].val;q((function(t){var r,l,a=t;if(null===(r=t[e])||void 0===r?void 0:r.includes(n)){var s=t[e].filter((function(e){return e!=n}));return a[e]=s,O(N,a),a}return null===(l=a[e])||void 0===l||l.push(n),O(N,a),a}))});return(0,s.useEffect)((function(){""===g||_||(k(g),O(g,null))}),[g]),(0,r.jsxs)("div",{className:"bg-[#f7f6f3] min-h-screen h-full",children:[(0,r.jsxs)(l.default,{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),(0,r.jsx)("title",{children:"".concat(g," - heline")}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"/favicon.png"}),(0,r.jsx)("script",{defer:!0,"data-domain":"heline.dev",src:"https://plausible.io/js/plausible.js"})]}),(0,r.jsx)("nav",{className:"border-b bg-white border-green-300",children:(0,r.jsxs)("div",{className:"py-6 w-full max-w-7xl mx-auto flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-full max-w-[25%]",children:(0,r.jsxs)("div",{className:"text-green-500 flex items-center gap-x-2 px-4",children:[(0,r.jsx)("img",{src:"/favicon.png",className:"w-8"}),(0,r.jsx)("a",{href:"/",className:"tracking-wide font-medium uppercase text-3xl pb-1",children:"heline"})]})}),(0,r.jsxs)("div",{className:"flex px-4 rounded-lg border border-green-400 bg-white items-center justify-between w-full mr-8 mx-4",children:[(0,r.jsx)("svg",{viewBox:"64 64 896 896",focusable:"false",className:"text-gray-400","data-icon":"search",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"})}),(0,r.jsx)("input",{onChange:function(e){k(encodeURIComponent(e.target.value))},autoFocus:!0,spellCheck:!1,defaultValue:g,type:"text",placeholder:"Search",className:"text-md bg-white rounded-full w-full focus:outline-none py-3 px-2 text-gray-500"})]})]})}),j&&(0,r.jsxs)("div",{className:"grid place-items-center pt-32 space-y-8",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),(0,r.jsxs)("div",{className:"text-center text-lg text-gray-600",children:["Can not find matching query ",(0,r.jsxs)("strong",{children:['"',g,'"']}),"."]})]}),_&&(0,r.jsxs)("div",{className:"w-full max-w-7xl mx-auto flex",children:[(0,r.jsxs)("div",{className:"w-full min-w-[250px] max-w-[25%] py-8 space-y-4 pl-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Repository"}),(0,r.jsx)("input",{className:"bg-white rounded border border-gray-200 w-full px-4 py-3 text-sm",type:"text",placeholder:"Filter repositories"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(e=_.facets)||void 0===e||null===(t=e.repo)||void 0===t?void 0:t.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=_.facets.repo.buckets.length&&T("repo",e)}(t)},id:e.val,className:"p-2",type:"checkbox",checked:null===(n=E.repo)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{htmlFor:e.val,children:e.val})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Path"}),(0,r.jsx)("input",{className:"bg-white rounded border border-gray-200 w-full px-4 py-3 text-sm",type:"text",placeholder:"Filter paths"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(n=_.facets)||void 0===n||null===(c=n.path)||void 0===c?void 0:c.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=_.facets.path.buckets.length&&T("path",e)}(t)},className:"p-2",type:"checkbox",checked:null===(n=E.path)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{className:"truncate",children:e.val})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Language"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(u=_.facets)||void 0===u||null===(f=u.lang)||void 0===f?void 0:f.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=_.facets.lang.buckets.length&&T("lang",e)}(t)},className:"p-2",type:"checkbox",checked:null===(n=E.lang)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{children:e.val})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]})]}),(0,r.jsxs)("div",{className:"w-full max-w-[75%] p-8 pr-6",children:[(0,r.jsx)("div",{className:"pb-2",children:(0,r.jsxs)("p",{className:"text-gray-700",children:["Total: ",_.total]})}),h(null===(m=_.hits)||void 0===m?void 0:m.map((function(e){var t;if(null!==e.content.snippet)return(0,r.jsxs)("div",{className:"py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("a",{target:"_blank",href:"https://github.com/".concat(e.repo.raw),className:"flex gap-2 items-center",children:[(0,r.jsx)("img",{className:"repo-avatar rounded-full border",src:"https://avatars.githubusercontent.com/u/".concat(e.owner_id.raw,"?s=60&amp;v=4"),alt:"",width:"22",height:"22"}),(0,r.jsx)("span",{className:"text-gray-700 font-light",children:e.repo.raw})]}),(0,r.jsx)("a",{target:"_blank",href:"https://github.com/".concat(e.repo.raw,"/blob/").concat(e.branch.raw,"/").concat(e.file_id.raw.split("/").slice(4,10).join("/")),className:"flex gap-1 items-center",children:(0,r.jsx)("span",{className:"text-green-500 pl-8",children:e.file_id.raw.split("/").slice(3,10).join("/")})})]}),(0,r.jsx)("div",{className:"border border-gray-200 rounded-md bg-white p-2 my-2",children:h(null===(t=e.content.snippet)||void 0===t?void 0:t.map((function(t,n){if(0!==t.length){var l=[],a=0,s="";if(t.split("\n").forEach((function(e){a++,s+=e,4===a&&(s.includes("<mark>")&&l.push(s),s="",a=0)})),""!==s&&s.includes("<mark>")&&l.push(s),0!=l.length)return l=l.slice(0,3),(0,r.jsx)(r.Fragment,{children:h(l.map((function(t,a){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("table",{className:"highlight-table",children:(0,r.jsx)("tbody",{dangerouslySetInnerHTML:{__html:t}})}),a<l.length&&n<e.content.snippet.length-1&&(0,r.jsx)("div",{className:"bg-[#f1f0ec] h-8 my-[8px] -mx-2"})]})})))})}})))})]})})))]})]})]})}}},function(e){e.O(0,[862,774,888,179],(function(){return t=8161,e(e.s=t);var t}));var t=e.O();_N_E=t}]);