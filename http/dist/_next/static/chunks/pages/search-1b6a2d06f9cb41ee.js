(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return n(4333)}])},4333:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),a=n(9008),l=n(1163),s=n(7294);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,s.useRef)(!1),r=(0,s.useRef)(),a=(0,s.useRef)(e),l=(0,s.useCallback)((function(){return n.current}),[]),i=(0,s.useCallback)((function(){n.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){n.current=!0,a.current()}),t)}),[t]),c=(0,s.useCallback)((function(){n.current=null,r.current&&clearTimeout(r.current)}),[]);return(0,s.useEffect)((function(){a.current=e}),[e]),(0,s.useEffect)((function(){return i(),c}),[t]),[l,c,i]}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);s=!0);}catch(c){i=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n(9669),d=n.n(u);function h(e){return s.Children.toArray(e)}var f=n(7516);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(l.push(r.value),!t||l.length!==t);s=!0);}catch(c){i=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(){var e,t,n,c,u,p,x,v=(0,l.useRouter)(),g=v.query.q,j=void 0===g?"":g,y=(0,s.useState)(!1),b=y[0],w=y[1],N=(0,s.useState)(""),k=N[0],_=N[1],S=(0,s.useState)(null),C=S[0],A=S[1],E=(0,s.useState)({repo:[],lang:[],path:[]}),q=E[0],T=E[1],O=function(e,t){var n,r,a;if(""!=e){if(console.log(t),null==t){if(v.query["filter[repo]"]){var l=Object.assign(t||{},{repo:v.query["filter[repo]"].split(",")});t=l}if(v.query["filter[lang]"]){var s=Object.assign(t||{},{lang:v.query["filter[lang]"].split(",")});t=s}if(v.query["filter[path]"]){var i=Object.assign(t||{},{path:v.query["filter[path]"].split(",")});t=i}null!=t&&(console.log("Updating filter"),T((function(){return t})))}var c=e;(null===t||void 0===t||null===(n=t.repo)||void 0===n?void 0:n.length)>0&&(c+="&filter[repo]=".concat(t.repo.join(","))),(null===t||void 0===t||null===(r=t.lang)||void 0===r?void 0:r.length)>0&&(c+="&filter[lang]=".concat(t.lang.join(","))),(null===t||void 0===t||null===(a=t.path)||void 0===a?void 0:a.length)>0&&(c+="&filter[path]=".concat(t.path.join(","))),d().get("/api/search?q=".concat(c)).then((function(e){null===e.data.hits.hits?(w(!0),A(null)):(w(!1),A(e.data.hits))})).catch((function(e){console.error(e),w(!0),A(null)})),v.push("search?q=".concat(c))}},I=(m(function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=o(i(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),3),r=n[0],a=n[1],l=n[2];return(0,s.useEffect)(l,t),[r,a]}((function(){""!=k&&O(k,q)}),500,[k]),2)[1],function(e,t){var n=C.facets[e].buckets[t].val;T((function(t){var r,a,l=t;if(null===(r=t[e])||void 0===r?void 0:r.includes(n)){var s=t[e].filter((function(e){return e!=n}));return l[e]=s,O(k,l),l}return null===(a=l[e])||void 0===a||a.push(n),O(k,l),l}))}),R=function(e){var t=String(e);if(t.includes("/")){var n=t.split("/");return n.slice(Math.max(n.length-2,1)).join("/")}return e};return(0,s.useEffect)((function(){""===j||C||(_(j),O(j,null))}),[j]),(0,r.jsxs)("div",{className:"bg-zinc-50 min-h-screen h-full",children:[(0,r.jsxs)(a.default,{children:[(0,r.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"}),(0,r.jsx)("title",{children:"".concat(j," - heline")}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:"/favicon.png"}),(0,r.jsx)("script",{defer:!0,"data-domain":"heline.dev",src:"https://plausible.io/js/plausible.js"})]}),(0,r.jsx)("nav",{className:"bg-white shadow-sm",children:(0,r.jsxs)("div",{className:"py-6 w-full max-w-7xl mx-auto flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-full max-w-[25%]",children:(0,r.jsx)("div",{className:"text-emerald-500 flex items-center gap-x-2 px-4",children:(0,r.jsx)("a",{href:"/",children:(0,r.jsxs)("h1",{className:"text-2xl font-extrabold text-gray-900 dark:text-white sm:text-center inline-flex items-center select-none",children:[(0,r.jsx)("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-emerald-500 to-teal-600",children:"heline"}),(0,r.jsx)("span",{children:"."}),(0,r.jsx)("span",{className:"text-gray-700",children:"dev"})]})})})}),(0,r.jsxs)("div",{className:"flex px-4 rounded shadow-sm border bg-white items-center justify-between w-full mr-8 mx-4",children:[(0,r.jsx)("span",{className:"text-gray-500 select-none text-xl pr-4",children:(0,r.jsx)(f.wTD,{})}),(0,r.jsx)("input",{onChange:function(e){_(encodeURIComponent(e.target.value))},autoFocus:!0,spellCheck:!1,defaultValue:j,type:"text",placeholder:"Search",className:"py-3 flex-grow text-gray-900 dark:bg-black dark:text-white border-none outline-none focus:outline-none focus:ring-0 autofill:shadow-fill-white dark:autofill:shadow-fill-black"})]})]})}),b&&(0,r.jsxs)("div",{className:"grid place-items-center pt-32 space-y-8",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-20 w-20 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),(0,r.jsxs)("div",{className:"text-center text-lg text-gray-600",children:["Can not find matching query ",(0,r.jsxs)("strong",{children:['"',j,'"']}),"."]})]}),C&&(0,r.jsxs)("div",{className:"w-full max-w-7xl mx-auto flex",children:[(0,r.jsxs)("div",{className:"w-full min-w-[250px] max-w-[25%] py-8 space-y-4 pl-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Repository"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(e=C.facets)||void 0===e||null===(t=e.repo)||void 0===t?void 0:t.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center truncate",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=C.facets.repo.buckets.length&&I("repo",e)}(t)},id:e.val,className:"p-2",type:"checkbox",checked:null===(n=q.repo)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{className:"truncate",htmlFor:e.val,children:e.val})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Path"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(n=C.facets)||void 0===n||null===(c=n.path)||void 0===c?void 0:c.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center truncate",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=C.facets.path.buckets.length&&I("path",e)}(t)},className:"p-2",type:"checkbox",checked:null===(n=q.path)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{className:"truncate",children:R(e.val)})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsx)("h3",{className:"text-gray-800 uppercase",children:"Language"}),(0,r.jsx)("div",{className:"py-2 space-y-1",children:h(null===(u=C.facets)||void 0===u||null===(p=u.lang)||void 0===p?void 0:p.buckets.map((function(e,t){var n;return(0,r.jsxs)("div",{className:"flex justify-between items-center text-gray-600 pr-1",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("input",{onChange:function(){return function(e){0!=C.facets.lang.buckets.length&&I("lang",e)}(t)},className:"p-2",type:"checkbox",checked:null===(n=q.lang)||void 0===n?void 0:n.includes(e.val)}),(0,r.jsx)("label",{children:e.val})]}),(0,r.jsx)("div",{className:"text-sm",children:e.count})]})})))})]})]}),(0,r.jsxs)("div",{className:"w-full max-w-[75%] p-8 pr-6",children:[(0,r.jsx)("div",{className:"pb-2",children:(0,r.jsxs)("p",{className:"text-gray-700",children:["Total: ",C.total]})}),h(null===(x=C.hits)||void 0===x?void 0:x.map((function(e){var t;if(null!==e.content.snippet)return(0,r.jsxs)("div",{className:"py-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("a",{target:"_blank",href:"https://github.com/".concat(e.repo.raw),className:"flex gap-2 items-center",children:[(0,r.jsx)("img",{className:"repo-avatar rounded-full border",src:"https://avatars.githubusercontent.com/u/".concat(e.owner_id.raw,"?s=60&amp;v=4"),alt:"",width:"22",height:"22"}),(0,r.jsx)("span",{className:"text-gray-700 font-light",children:e.repo.raw})]}),(0,r.jsx)("a",{target:"_blank",href:"https://github.com/".concat(e.repo.raw,"/blob/").concat(e.branch.raw,"/").concat(e.file_id.raw.split("/").slice(4,100).join("/")),className:"flex gap-1 items-center",children:(0,r.jsx)("span",{className:"text-emerald-500 pl-8 truncate",children:e.file_id.raw.split("/").slice(2,100).join("/")})})]}),(0,r.jsx)("div",{className:"border border-zinc-200 rounded-md bg-white p-2 my-2",children:h(null===(t=e.content.snippet)||void 0===t?void 0:t.map((function(t,n){if(0!==t.length){var a=[],l=0,s="";if(t.split("\n").forEach((function(e){l++,s+=e,4===l&&(s.includes("<mark>")&&a.push(s),s="",l=0)})),""!==s&&s.includes("<mark>")&&a.push(s),0!=a.length)return a=a.slice(0,3),(0,r.jsx)(r.Fragment,{children:h(a.map((function(t,l){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("table",{className:"highlight-table",children:(0,r.jsx)("tbody",{dangerouslySetInnerHTML:{__html:t}})}),l<a.length&&n<e.content.snippet.length-1&&(0,r.jsx)("div",{className:"bg-zinc-100 h-8 my-[8px] -mx-2"})]})})))})}})))})]})})))]})]})]})}}},function(e){e.O(0,[874,491,774,888,179],(function(){return t=8161,e(e.s=t);var t}));var t=e.O();_N_E=t}]);